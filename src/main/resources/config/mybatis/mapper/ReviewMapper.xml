<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.izo.camp.mapper.ReviewMapper">

	<select id="reviewlist" resultType="reviewVO">
		select * from reviewtable
	</select>
	
	<select id="reviewIdx" resultType="reviewVO">
		select * from reviewtable where idx=#{idx}
	</select>
	
	<insert id="reviewInsert" parameterType="reviewVO" >
			
		INSERT INTO REVIEWTABLE
(IDX, MEMBERID, PRODUCTID, TITLE, CONTENT, FILENAME, PWD, REGDATE, READHIT, JOAYO)
VALUES(SEQ_Review.nextVal, #{memberid}, #{productid}, #{title}, #{content}, #{filename}, #{pwd}, SYSDATE, 0, 0)
	</insert>
	

		<!-- 게시글 삭제하기 -->
	<delete id="reviewDelete" parameterType="java.util.HashMap">
		delete from reviewtable where idx=#{idx} and pwd=#{pwd}
	</delete>
	
	<update id="readhitCount">
		update reviewtable set
			readhit = readhit + 1
			where
			idx = #{idx}
	</update>

	

 		 <!-- 게시글 수정을 위한  조회 --> 
	<select id="reviewSelect" resultType="reviewVO" parameterType="int">
		select * from reviewtable where idx=#{idx}
	</select>
	
		<!-- 게시글 수정하기 -->
	<update id="reviewUpdate" parameterType="reviewVO">
		update reviewtable
		set productid=#{productid},
		title=#{title},
		content=#{content},
		pwd=#{pwd},
		filename=#{filename},
		regdate=sysdate
		where idx=#{idx}
	</update>
	
	<update id="joayo_check" parameterType="HashMap">
		update joayo
			set joayo_check = joayo_check+1
			where id=#{id} and idx={idx}
	</update>

	<update id="joayo_check_cancel" parameterType="HashMap">
		update joayo
			set joayo_check = 0
			where id=#{id} and idx=#{idx}
	</update>

	
</mapper>